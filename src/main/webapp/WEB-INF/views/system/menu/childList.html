 <!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    

    <title>海南航冠电子科技有限公司-系统管理-菜单效果</title>
    <meta name="keywords" content="">
    <meta name="description" content="">
    <link href="/css/bootstrap.min.css?v=3.3.5" rel="stylesheet">
	<link href="/css/font-awesome.min.css?v=4.4.0" rel="stylesheet">
	<link href="/css/animate.min.css" rel="stylesheet">
	<link href="/css/core.min.css?v=4.0.0" rel="stylesheet">
	<link href="/css/style.css" rel="stylesheet">
	<link rel="stylesheet" href="/css/pagination.css" />
</head>

<body class="gray-bg">
    <div class="wrapper wrapper-content animated fadeInRight">
        <div class="row">
            <div class="col-md-12">
                <div class="ibox float-e-margins">
                    <div class="ibox-title">
                      <div class="row">
                          <div class="col-md-4">
                              <div class="input-group query">
                                <input type="text" name="menuName" class="form-control" placeholder="菜单名称">
                                <input type="hidden" id="parentId" name="parentId" value="${parentId!''}">
                                <span class="input-group-btn">
                                	<button type="button" class="btn btn-primary" onclick="selectList(1)">搜索</button>
                                </span>
                                &emsp;
                                <span class="input-group-btn">
                                	<button type="button" class="btn btn-primary" onclick="goToPage('/menu/')">返回</button>
                                </span>
                              </div>
                          </div>
                          
                      </div>
                        
                    </div>
                    <div class="ibox-content">
                      <button class="btn btn-primary" type="submit" data-toggle="modal" data-target="#myModal0_1" onclick="clearInpt('#myModal0_1')">添加</button> 
                        <table class="table table-bordered">
                            <thead>
                                <tr>
                                    <th>菜单名称</th>
                                    <th>父菜单名称</th>
                                    <th>菜单URL</th>
                                    <th>菜单CSS样式</th>
                                    <th>排序</th>
                                    <th>备注</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody id="tabcontent">
                             
                            </tbody>
                        </table>
                        <!--分页 S-->
                         <div class="pages clearfix">
                            <div id="Pagination" class="pagecontent">
                            	
                            </div>
                             <div class="searchPage">
                                 <span class="page-sum">共<strong class="allPage"></strong>页</span>
<!--                                  <span class="page-go">跳转<input type="text">页</span> -->
<!--                                  <a href="javascript:;" class="page-btn">GO</a> -->
<!--                                  <input id="pageUrl" type="hidden" name="pageUrl" value="selectList"/> -->
<!--                                  <input id="totalPage" type="hidden" name="totalPage" value="${totalPage!'0'}"/> -->
<!--                                  <input id="pageSize" type="hidden" name="pageSize" value="10"/> -->
                             </div>
                            </div>
                        <!--分页 E-->   
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 2016-4-7 add -->
    <!--添加 S-->
    <div class="modal fade" id="myModal0_1" tabindex="0" role="dialog"   aria-labelledby="myModalLabel" aria-hidden="true">
      	 <div class="modal-worppar">
      	 	<div class="row">
            <div class="col-md-12">
                  <h2 class="h5Class">添加菜单列表信息</h2>
                  <a type="button" class="btn btn-primary" data-dismiss="modal" style="position:absolute; right: 31px; top: 10px;">关闭</a>
                    <div class="ibox-content">
                        <form class="form-horizontal m-t"  novalidate="novalidate" id="subForm">
                            <input type="hidden" id="parentId" name="parentId" value="${parentId!''}">
                            <div class="form-group">
                                <label class="col-sm-2 control-label">菜单名称：</label>
                                <div class="col-sm-10">
                                    <input name="menuName" type="text" class="form-control" required="" aria-required="true">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-2 control-label">菜单URL：</label>
                                <div class="col-sm-10">
                                	<input name="menuUrl" type="text" class="form-control" required="" aria-required="true">
                                </div>
                            </div>
<!--                             <div class="form-group"> -->
<!--                                 <label class="col-sm-2 control-label">图片URL：</label> -->
<!--                                 <div class="col-sm-10"> -->
<!--                                 	<input name="picUrl" type="text" class="form-control" required="" aria-required="true"> -->
<!--                                 </div> -->
<!--                             </div> -->
                            <div class="form-group">
                                <label class="col-sm-2 control-label">菜单CSS样式：</label>
                                <div class="col-sm-10">
                                    <input name="menuCss" type="text" class="form-control" required="" aria-required="true">
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label class="col-sm-2 control-label">排序：</label>
                                <div class="col-sm-10">
                                    <input name="menuOrder" type="text" class="form-control" required="" aria-required="true">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-2 control-label">备注：</label>
                                <div class="col-sm-10">
                                    <input name="remark" type="text" class="form-control" required="" aria-required="true">
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4 col-sm-offset-2 pb20">
                                    <a class="btn btn-primary" data-name="subbtn">保存</a> 
                                </div>
                            </div>
                        </form>
                	</div>
            	</div>
        	</div>
      	</div>
    </div>
    <!--添加 E-->
    <!--修改 S-->
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog"   aria-labelledby="myModalLabel" aria-hidden="true">
      	 <div class="modal-worppar">
      	 	<div class="row">
            <div class="col-md-12">
                  <h2 class="h5Class">修改菜单列表信息</h2>
                  <a type="button" class="btn btn-primary" data-dismiss="modal" style="position:absolute; right: 31px; top: 10px;">关闭</a>
                    <div class="ibox-content">
                        <form class="form-horizontal m-t" novalidate="novalidate" id="subFormUpt">
                        	<input type="hidden" name="menuId"/>
                            <input type="hidden" id="parentId" name="parentId" value="${parentId!''}">
                            <div class="form-group">
                                <label class="col-sm-2 control-label">菜单名称：</label>
                                <div class="col-sm-10">
                                    <input name="menuName" type="text" class="form-control" required="" aria-required="true">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-2 control-label">菜单URL：</label>
                                <div class="col-sm-10">
                                	<input name="menuUrl" type="text" class="form-control" required="" aria-required="true">
                                </div>
                            </div>
<!--                             <div class="form-group"> -->
<!--                                 <label class="col-sm-2 control-label">图片URL：</label> -->
<!--                                 <div class="col-sm-10"> -->
<!--                                 	<input name="picUrl" type="text" class="form-control" required="" aria-required="true"> -->
<!--                                 </div> -->
<!--                             </div> -->
                            <div class="form-group">
                                <label class="col-sm-2 control-label">菜单CSS样式：</label>
                                <div class="col-sm-10">
                                    <input name="menuCss" type="text" class="form-control" required="" aria-required="true">
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label class="col-sm-2 control-label">排序：</label>
                                <div class="col-sm-10">
                                    <input name="menuOrder" type="text" class="form-control" required="" aria-required="true">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-2 control-label">备注：</label>
                                <div class="col-sm-10">
                                    <input name="remark" type="text" class="form-control" required="" aria-required="true">
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4 col-sm-offset-2 pb20">
                                    <a class="btn btn-primary" data-name="subbtn">保存</a> 
                                </div>
                            </div>
                        </form>
                	</div>
            	</div>
        	</div>
      	</div>
    </div>
    <!--修改 E-->
	
	<!--  删除（Modal） -->
    <div class="modal fade" id="myModal2" tabindex="-2" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
       <div class="modal-dialog custom_modal">
          <div class="modal-content">
             <div class="modal-header">
             	<h4 class="modal-title" id="myModalLabel">是否删除 <span data-dismiss="modal"><Img src="/img/close.png" ></span></h4>
               
            </div>
            <div class="modal-body wilq">
             <div class="modal-body-img">
             <img src="/img/11.png">
              </div>
              <div class="modal-body-p">
              <p>你确定要删除吗？</p>
              <p>如果是请点击"确定"，否则点"取消"</p>
              <p class="add_button">
              	<input type="hidden" name="menuId" />
              	<button type="button" class="btn btn-primary qd" data-dismiss="modal" onclick="delFun(this)">确定</button>
                 <button type="button" class="btn btn-primary qx" 
                   data-dismiss="modal">取消
                </button>
                </p>
              </div>
             </div>
          </div><!-- /.modal-content -->
    </div><!-- /.modal -->
    </div>
    <!-- 删除 （Modal） -->
<style >
.bodgdl dd{
	margin-bottom: 5px;
}
.bodgdl dd span{ 
	float: left;
	margin-top: -3px ;
}
.checkbox input[type=checkbox], .checkbox-inline input[type=checkbox], .radio input[type=radio], .radio-inline input[type=radio] {
    margin-top: 0;
}
.wilq a{
	font-size: 15px;
	padding-right: 5px;
}
.h5Class{
	padding: 0;
	margin: 0;
	height: 50px;
	line-height: 50px; 
	text-indent: 20px;
	font-size: 20px;
	font-weight: 600;
}
.modal-worppar{
	max-width:1200px;
	background: #fff;
	border-radius: 5px;
	margin: 30px  auto;
}
 .ibox-content table tr th,
 .ibox-content table tr td{
    text-align: center;
    font-size: 14px;
    height: 27px;
    line-height: 27px;
 }
 .ibox-content table tr td a{
    padding: 0 5px;
 }
.titleCon{
    margin-top: -10px;
}

.titleCon a i{
    position: relative; 
    font-size: 25px;
    color: #000;
}
.ibox-title {
    margin-top: 10px;
    border-width: 1px 0 0;
}
  /*弹出框*/
  .theme-popover-mask {
    z-index: 9998;
    position:fixed;
    top:0;
    left:0;
    width:100%;
    height:100%;
    background:#000;
    opacity:0.4;filter:alpha(opacity=40);
    display:none;
}
  .theme-popover {
    z-index:9999;
    position:fixed;
    top:0;
    right: 0;
    bottom: 0;
    left: 0;
    margin: auto;
    background-color:#f3f3f4;
    display:none;
}
  .theme-poptit {
    border-bottom:1px solid #eef1f6;
    padding:15px;
    position: relative; 
}
  .theme-poptit .close {
    float:right;
    color:#999;
    padding:5px;
    margin:-2px -5px -5px;
    font:bold 14px/14px simsun;
    text-shadow:0 1px 0 #ddd; 
}

</style>
    <script src="/js/jquery.min.js?v=2.1.4"></script>
    <script src="/js/bootstrap.min.js?v=3.3.5"></script>
    <script src="/js/content.min.js?v=1.0.0"></script>
    <script src="/js/wxm.dialog.js"></script>
    <script src="/js/script.js"></script>
    
	<script type="text/javascript">
		function clearInpt(panel){
			$(panel).find("input[type='text']").val("");
		}
		selectList(1);
		function selectList(currentPageNo){
			if(!currentPageNo){
				currentPageNo = 1;
			}
			var menuName = $(".query").find("input[name='menuName']").val();
			var parentId = $(".query").find("input[name='parentId']").val();
			$.ajax({
	            	url:"/menu/childMenu",
	            	data:{"currentPageNo":currentPageNo,'menuName':menuName,'parentId':parentId},
	            	type:'POST',
	            	cache:false,
	            	async:false,
	            	dataType:'json',
	            	success:function(data) {
	            		if (data.isError === "1") {
	                        wxm.dialog({type : 'error',message : data.msg});
	                    } else {
	                        selectHtml(data);
	                    }
	            	},
	            	error : function() {
	            		wxm.dialog({type : 'error',message : '操作失败，请重试！'});
	            	}
	    	});
		}
		function selectHtml(data){
			var rows = data.rows;
			var tb = [];
			if(rows && rows.length>0){
				for (var i = 0; i < rows.length; i++) {
					var ob = rows[i];
					ob.menuId = ob.id;
					tb[tb.length] = '<tr>';
					tb[tb.length] = '<td>'+nullToStr(ob.menuName)+'</td>';
					tb[tb.length] = '<td>'+nullToStr(ob.parentName)+'</td>';
					tb[tb.length] = '<td>'+nullToStr(ob.menuUrl)+'</td>';
					tb[tb.length] = '<td>'+nullToStr(ob.menuCss)+'</td>';
					tb[tb.length] = '<td>'+nullToStr(ob.menuOrder)+'</td>';
					tb[tb.length] = '<td>'+nullToStr(ob.remark)+'</td>';
					tb[tb.length] = '<td>';
					tb[tb.length] = "    <a data-target='#myModal' data-toggle='modal' data-val='"+JsonToStr(ob)+"' onclick='viewWin(this,\"upt\");'>修改</a>";
					tb[tb.length] = "    <a onclick='delFun(\""+ob.id+"\");'>删除</a>";
					tb[tb.length] = '</td>';
					tb[tb.length] = '</tr>';
				}
				paginationFun($("#Pagination"),data.totalCnt,10,data.currentPage,"selectList");
			}
			$("#tabcontent").html(tb.join(""));
		}
		function viewWin(ob,flag){
			var panel = $(ob).attr("data-target");
			var jsonstr = $(ob).attr("data-val");
			var data = eval('('+jsonstr+')');
			$(panel).find("input").each(function(index){
				var name = $(this).attr("name");
				$(this).val(nullToStr(data[name]));
			});
		}
		//id赋值
		function inptData(ob,id){
			var panel = $(ob).attr("data-target");
			$(panel).find("input[name='menuId']").val(id);
		}
		//删除 
		function delFun(id){
			wxm.dialog({
                type : 'confirm',
                message : "确定是否删除？",
                callback : {
                    correct : function() {
						//var menuId = $(ob).parent().find("input[name='menuId']").val();
						$.ajax({
				            	url:"/menu/delete",
				            	data:{'menuId':id},
				            	type:'POST',
				            	cache:false,
				            	async:false,
				            	dataType:'json',
				            	success:function(data) {
				            		if (data.isError === "1") {
				                        wxm.dialog({type : 'error',message : data.msg});
				                    } else {
				                        wxm.dialog({type : 'success',message : data.msg});
				                        selectList(1);
				                    }
				            	},
				            	error : function() {
				            		wxm.dialog({type : 'error',message : '操作失败，请重试！'});
				            	}
				    	});
				    }
                }
            });
		}
		
		$(function () {
			
			//新增
			$("#subForm").find("a[data-name='subbtn']").click(function(){
				var data = $("#subForm").serializeArray();
				$.ajax({
	            	url:"/menu/add",
	            	data:data,
	            	type:'POST',
	            	cache:false,
	            	async:false,
	            	dataType:'json',
	            	success:function(data) {
	            		if (data.isError === "1") {
	                        wxm.dialog({type : 'error',message : data.msg});
	                    } else {
	                        wxm.dialog({type : 'success',message : data.msg});
	                        selectList(1);
	                        $("#myModal0_1").find("a[data-dismiss='modal']").click();
	                    }
	            	},
	            	error : function() {
	            		wxm.dialog({type : 'error',message : '操作失败，请重试！'});
	            	}
	    		});
			});
			//修改
			$("#subFormUpt").find("a[data-name='subbtn']").click(function(){
				var data = $("#subFormUpt").serializeArray();
				$.ajax({
	            	url:"/menu/update",
	            	data:data,
	            	type:'POST',
	            	cache:false,
	            	async:false,
	            	dataType:'json',
	            	success:function(data) {
	            		if (data.isError === "1") {
	                        wxm.dialog({type : 'error',message : data.msg});
	                    } else {
	                        wxm.dialog({type : 'success',message : data.msg});
	                        selectList(1);
	                        $("#myModal").find("a[data-dismiss='modal']").click();
	                    }
	            	},
	            	error : function() {
	            		wxm.dialog({type : 'error',message : '操作失败，请重试！'});
	            	}
	    		});
			});
			
		});
	</script>
</body>
</html>